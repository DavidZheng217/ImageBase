
dm "output;clear;log;clear;program;recall;graph;cler;";
options ps=55 nodate nonumber;
title 'To predict the asking price of a used Chevrolet Camaro';
title2 'asking price in thousands';
data house;
input yy x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12  ;
y=log(yy);
label y='price'  x1='bedrooms' 
x2='bathrooms'
x3='sqft_living' x4='sqft_lot' x5='floors' x6='waterfront' x7='view' x8='condition' x9='grade' x10='sqft_above' x11='sqft_basement' x12='duration' ;

/* last record x1=5 x2=70 x3=1 x4=0 x5=0 */
cards;
210000	3	1	860	11725	1	0	0	4	6	860	0	72
297000	3	2.5	1940	14952	2	0	0	3	8	1940	0	21
470000	3	1	1010	5000	1	0	0	3	7	1010	0	63
226500	3	1.5	1300	7370	1	0	0	4	7	900	400	39
274250	3	1	910	8450	1	0	0	4	6	910	0	53
840000	4	1.75	2480	11010	1	0	0	4	9	1630	850	49
677900	3	2.5	2440	4587	2	0	0	3	8	2440	0	5
425000	3	1	1010	5864	1	0	0	3	7	1010	0	100
180250	2	0.75	900	9600	1	0	0	3	6	900	0	74
464000	6	3	2300	3404	2	0	0	3	7	1600	700	95
320000	4	2.25	1550	7579	2	0	0	3	8	1550	0	22
625504	3	2.25	1270	1566	2	0	0	3	8	1060	210	1
592500	4	2.5	2240	12032	1	0	0	3	9	2240	0	32
465000	3	2.5	2714	17936	2	0	0	3	9	2714	0	10
477000	4	2.75	1720	6270	2	0	0	3	8	1720	0	37
280000	2	1	850	16400	1	0	0	3	6	850	0	92
1.51E+06	5	3	3300	33474	1	0	3	3	9	1870	1430	58
445838	3	2.5	2250	5692	2	0	0	3	8	2250	0	15
1.07E+06	2	2.25	3900	14864	1	0	3	3	8	1950	1950	68
467000	2	1.5	1320	10800	1	0	0	4	8	1320	0	68
686000	4	2.5	2760	6440	2	0	0	3	10	2760	0	16
279950	3	2	1750	9750	1	0	0	3	7	1350	400	54
527000	4	2.25	2330	19436	2	0	0	3	8	2330	0	28
325000	3	2.25	2220	16020	1	0	0	4	8	1780	440	49
328000	3	2.25	2020	8379	2	0	0	3	7	2020	0	21
390000	3	2.25	1250	7500	1	0	0	5	7	1250	0	73
479950	2	2	1510	6516	1	0	0	3	8	1510	0	10
264950	4	2.25	1720	9753	1	0	0	4	7	1120	600	37
235000	3	1	1430	15246	1	0	0	4	7	980	450	54
516500	3	2.5	1480	4729	2	0	0	3	7	1480	0	11
655000	2	1.75	1450	15798	2	1	4	3	7	1230	220	100
500000	4	2.75	2280	15347	1	0	0	5	7	2280	0	55
315000	6	2.75	2940	7350	1	0	0	3	8	1780	1160	37
213000	2	1	1000	10200	1	0	0	3	6	1000	0	54
475000	3	1.5	2480	5280	1.5	0	0	5	7	1620	860	68
1.03E+06	5	4	3760	28040	2	0	0	3	10	3760	0	32
416000	3	2	2220	94300	1	0	0	5	7	1640	580	39
410000	4	1	1970	4740	1.5	0	0	3	7	1670	300	111
800000	3	3.5	3830	221284	2	0	0	3	10	3530	300	22
472000	6	2.5	4410	14034	1	0	2	4	9	2350	2060	50
225000	3	1.75	1430	8505	1	0	0	4	7	1430	0	47
210000	2	1	830	6000	1	0	0	3	6	830	0	75
455000	2	1	1430	5000	1.5	0	0	2	7	1430	0	90
225000	3	1	1300	8316	1	0	0	4	6	1300	0	61
480000	2	1	1030	3060	1	0	2	4	7	790	240	97
363000	3	2.5	2740	11872	2	0	0	3	9	2740	0	25
2.40E+06	4	2.5	3650	8354	1	1	4	3	9	1830	1820	15
181000	2	1.5	720	5120	1	0	0	3	6	720	0	61
250000	4	2	2010	7312	1	0	0	4	7	2010	0	39
481000	3	1.75	1560	3000	1	0	0	4	6	770	790	97
260000	3	2	1810	7209	1	0	0	4	7	1240	570	37
455000	4	2.5	3360	7685	2	0	0	3	9	3360	0	14
415000	3	2.25	1510	36224	2	0	0	3	8	1510	0	24
349500	3	1	1400	3538	1	0	0	3	7	800	600	62
245000	3	2.5	1730	7442	2	0	0	3	7	1730	0	28
592500	2	2	1420	9191	1.5	0	2	5	7	1420	0	87
385000	4	1.75	2360	7620	1	0	0	4	7	1180	1180	60
315000	3	1.75	1580	11455	1	0	0	4	7	1200	380	41
255000	3	1	1230	10170	1	0	0	3	7	1230	0	36
693000	4	2.5	2460	4425	2	0	0	3	8	2460	0	9
780000	3	1	1660	4400	1.5	0	0	3	8	1460	200	104
237000	3	1.75	1270	8470	1	0	0	4	7	1270	0	55
525000	3	2.25	2100	40510	2	0	0	3	10	1320	780	36
425000	2	1	770	5040	1	0	0	3	5	770	0	85
369900	1	0.75	760	10079	1	1	4	5	5	760	0	79
290000	4	2.5	1700	7280	2	0	0	4	7	1700	0	27
285000	3	1	1120	10701	1	0	0	3	7	1120	0	61
415000	2	1	1070	4500	1	0	0	3	7	1070	0	78
272500	3	2.5	2070	9900	1	0	0	3	8	1420	650	36
2.90E+06	4	3.25	5050	20100	1.5	0	2	3	11	4750	300	33
1.37E+06	4	4.75	5310	57346	2	0	0	4	11	5310	0	26
436000	2	1	1040	7538	1	0	0	4	7	1040	0	76
210000	3	1	1700	11390	1	0	0	4	7	1700	0	48
236000	3	1	1300	5898	1	0	0	3	7	1300	0	54
331000	3	1.75	1080	1306	1	0	0	3	7	580	500	61
365000	3	2.5	2653	4510	2	0	0	3	8	2653	0	9
450000	3	2	2290	16258	1	0	0	5	8	2290	0	55
770000	4	2.75	3820	26300	2	0	0	3	9	2850	970	1
455000	4	2.5	2210	49375	1	0	0	3	8	2210	0	18
405000	3	1.75	2390	6000	1	0	0	3	6	1240	1150	107
304900	4	1.75	2600	11325	1	0	0	4	7	1610	990	46
170000	2	1	860	5265	1	0	0	3	6	860	0	84
2.05E+06	5	3	3830	8480	2	0	1	5	9	2630	1200	110
780000	4	2.5	3500	7048	2	0	0	3	9	3500	0	10
330000	3	3	2420	13959	1	0	0	4	8	1740	680	27
370000	4	2.5	2720	8666	2	0	0	3	9	2720	0	23
467000	5	2.25	2500	13500	1	0	0	3	7	1850	650	36
405000	3	1.75	1670	6720	1	0	0	3	7	1140	530	35
675000	5	2.25	2900	10300	1	0	0	3	8	1450	1450	30
500000	2	1	1640	14100	1	0	0	4	7	1140	500	61
389999	4	2.5	1890	15770	2	0	0	4	7	1890	0	47
630000	4	1.75	2950	9025	1	0	2	4	8	1780	1170	40
360000	4	2.5	2160	9528	2	0	0	3	9	2160	0	23
580000	4	3	3280	11060	2	0	0	3	8	2270	1010	29
550000	3	2	1970	4166	2	0	3	5	8	1270	700	86
879000	4	2.5	3360	22111	2	0	0	3	10	3360	0	21
265000	3	2	1320	8959	1	0	0	3	7	1320	0	22
446500	3	2.5	2650	7286	2	0	0	3	8	2650	0	25
404000	3	1.5	2030	8880	1	0	0	3	7	1330	700	52
267500	3	1.75	1590	11914	1	0	2	3	7	1090	500	58
3.08E+06	4	5	4550	18641	1	1	4	3	10	2600	1950	13
335000	3	2.5	2440	7632	2	0	0	3	8	2440	0	17
576000	3	2.5	1940	9000	1	0	0	4	7	970	970	67
208633	3	2.5	2040	3810	2	0	0	3	8	2040	0	9
315000	3	2.25	2200	8750	1	0	0	4	7	1120	1080	51
725000	3	1.75	1920	3300	1	0	0	4	8	960	960	102
550000	4	2.75	1800	7750	1	0	0	4	8	1400	400	50
610750	4	2.25	2180	7297	2	0	0	3	8	2180	0	31
550700	2	1	1010	5000	1.5	0	0	4	6	1010	0	107
665000	4	2.75	3320	10574	2	0	0	5	8	2220	1100	55
834000	4	2.5	2370	4000	1.5	0	2	5	8	1980	390	87
201000	5	1.75	1660	78408	1.5	0	0	3	6	1660	0	100
2.38E+06	5	2.5	3650	9050	2	0	4	5	10	3370	280	94
1.38E+06	4	3.25	4290	12103	1	0	3	3	11	2690	1600	18
1.40E+06	4	3.25	4290	12103	1	0	3	3	11	2690	1600	18
305000	4	2.25	1950	7700	1	0	0	3	8	1350	600	36
487000	3	2	2590	14052	1	0	0	5	8	1720	870	67
390000	3	2.5	1930	64904	1	0	0	4	8	1930	0	27
548000	2	1	1470	3864	1	0	0	4	7	1170	300	99
268750	4	1	800	8775	1	0	0	3	6	800	0	72
819900	5	2.75	3150	7119	2	0	0	3	9	3150	0	2
520000	3	2.25	2030	16200	2	0	0	3	8	2030	0	31
230000	3	2	1450	11204	1	0	0	3	7	1450	0	12
240000	3	1.75	1510	10248	1	0	0	3	7	1510	0	46
232000	2	1	1240	12092	1	0	0	3	6	960	280	93
240500	2	1	1240	12092	1	0	0	3	6	960	280	93
274975	3	2.5	3030	45004	2	0	0	3	9	3030	0	28
740000	4	2	2050	4400	1.5	0	0	4	9	2050	0	93
186375	3	1	1000	7636	1	0	0	2	7	1000	0	63
790000	3	2.25	2370	10289	1	0	0	4	9	1590	780	38
880000	4	3.5	2800	6750	2	0	0	3	9	1890	910	64
279000	6	1.75	2240	11180	2	0	0	4	7	2240	0	60
295000	3	2	1810	10530	1	0	2	3	8	1810	0	24
640000	2	1	1070	5000	1	0	0	3	7	1070	0	91
940000	4	2	2490	9525	2	0	0	5	9	2490	0	47
260000	4	2.5	1960	5238	2	0	0	3	7	1960	0	12
559900	3	2.75	2930	5569	1	0	0	3	9	1860	1070	11
791500	4	2	1510	3500	1.5	0	0	5	7	1510	0	104
265000	3	1.75	1420	8250	1	0	0	3	7	1420	0	61
245000	3	1.75	1740	11547	1	0	0	3	7	1740	0	61
485000	4	1.75	2560	43995	2	0	0	4	7	2560	0	53
684000	4	3.5	3040	8414	2	0	0	3	9	2420	620	5
425000	3	1.75	2500	6840	1	0	0	3	8	1300	1200	58
309600	4	1.75	1275	20000	1	0	0	4	6	1275	0	24
552250	4	2.5	2580	5823	2	0	0	3	8	2580	0	13
165000	4	1	1000	7134	1	0	0	3	6	1000	0	72
239900	4	1	1000	7134	1	0	0	3	6	1000	0	72
320000	2	1	1070	32633	1	0	0	4	6	1070	0	85
206600	3	2	1390	13464	1	0	0	4	7	1390	0	28
387000	4	1.75	2500	7690	1	0	0	3	7	1250	1250	42
299000	1	0.75	560	12120	1	0	0	3	4	560	0	48
855000	4	2.75	2270	10460	2	0	0	3	9	2270	0	50
315000	3	1	1900	14400	1	0	0	4	7	1300	600	61
437500	2	1	990	3120	1	0	2	5	7	790	200	108
252000	4	1.5	1550	19800	1	0	0	4	7	1050	500	46
375000	4	1.75	2200	7475	1	0	0	5	7	1100	1100	60
300000	4	2.5	1910	4862	2	0	0	3	7	1910	0	10
420000	4	1	1750	9600	1.5	0	0	4	7	1750	0	61
900000	3	1	1330	77972	1	0	0	3	7	1330	0	87
679900	3	2.5	2440	5750	2	0	2	3	9	1980	460	15
463000	3	2.5	1640	29970	2	0	0	3	7	1640	0	23
380000	5	2.5	2760	11340	2	0	0	4	9	2760	0	37
329500	4	2.5	1820	7912	2	0	0	3	7	1820	0	21
604950	3	2.5	2110	5608	1	0	0	3	8	1340	770	2
795000	5	2.5	3040	9570	1	0	2	4	8	1640	1400	49
465000	3	2	1840	40438	2	0	0	3	7	1840	0	21
673000	4	2.5	2990	10400	2	0	0	3	9	2990	0	13
810000	4	2.5	3520	15420	2	0	0	3	10	3520	0	24
785000	4	2.75	2440	69415	1	0	0	4	8	1910	530	26
338000	4	3	2090	7500	1	0	0	3	7	1370	720	29
280000	3	2.25	1430	7222	2	0	0	3	7	1430	0	22
315000	4	2.25	2180	10754	1	0	0	5	7	1100	1080	61
530000	4	2.25	2180	10754	1	0	0	5	7	1100	1080	61
380000	5	3	3450	9914	2	0	0	3	9	3450	0	11
297000	3	2.25	1450	7562	2	0	0	3	7	1450	0	21
730000	4	2.5	3230	7331	2	0	0	3	10	3230	0	11
450000	3	1.75	1640	13500	1	0	0	3	7	1110	530	75
275000	3	3	1590	7750	1	0	0	3	7	1060	530	18
595000	4	2	2020	2849	2	0	0	3	7	2020	0	55
435000	3	1.5	1300	3348	1.5	0	0	3	7	1300	0	111
270000	2	1.5	1380	209959	1	0	0	1	6	1380	0	61
950000	3	3	4040	14338	2	0	0	3	10	3030	1010	29
389000	4	2.25	2130	5337	2	0	0	3	7	2130	0	14
560000	4	2.25	2550	7800	1	0	0	3	8	1580	970	47
1.35E+06	5	3.5	4800	14984	2	0	2	3	11	3480	1320	17
799000	4	2.25	2510	11585	2	0	0	4	8	2510	0	46
365500	3	2	1410	9600	1	0	0	4	7	1410	0	32
252350	3	2	1650	7352	1	0	0	3	7	1160	490	36
403950	4	2.5	2120	13780	2	0	0	3	8	2120	0	22
385000	4	1.5	2040	10726	1	0	0	3	7	1380	660	61
345000	4	1	1550	7620	1.5	0	0	3	7	1550	0	58
490000	3	2.75	1980	3128	2	0	0	4	9	1980	0	36
330000	3	2.5	1600	26977	2	0	0	3	8	1600	0	10
927000	4	2.75	3300	12090	2	0	0	3	8	3300	0	62
1.12E+06	4	2.5	3840	16619	2	0	1	4	10	3840	0	32
330000	2	1	1220	10000	1	0	0	5	7	1220	0	65
530000	5	2.25	2720	8800	1	0	0	4	7	1500	1220	57
365000	4	2	1940	25600	1	0	0	1	8	1940	0	53
378750	3	2.5	2160	3000	1.5	0	0	3	7	1260	900	106
269900	4	1.75	1530	8750	1.5	0	0	4	7	1530	0	47
;
proc corr data =house;
var y x1 - x12;
run;

proc gplot;
plot y*(x1 x2);
symbol1 v=star c=red;
 proc reg;
model y=x1 -x12 /vif; 
/*p: predicted value 
r: residuals 
clm: a confidence interval for a mean value of y
cli  : a predictive interval for a individual value of y 
dw: Durbin-Watson statistics
vif: variance inflaction factor */
symbol2 v=dot  c=blue;

run;

proc reg data=house;
model y=x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12/selection=backward slstay=0.15;
model y=x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12/selection=forward slentry=0.15;
model y=x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12/selection=stepwise slstay=0.15 slentry=0.1;
model y=x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12/selection=adjrsq AIC best=10;
model y=x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12/selection=cp;
  plot cp.*np. 
           / chocking=red  cmallows=blue 
             vaxis= 0 to 12 by 2 cframe=ligr; 
symbol1 v=dot  c=blue;
plot y*(x1 x12) / conf;
run;
proc reg;
model y=x1-x12/p r  clm cli dw vif; 
output out=all student=student rstudent=rstudent;
plot (student. rstudent. )*(x1 x2 predicted.);
plot student. * nqq./vaxis=-4 to 4 by 1 haxis=-3 to 3 by 1.0;
run;
proc univariate data=all plot normal;
var student;
run;
proc sgplot data=house;
  scatter x=x1 y=y ;
proc sgplot data=house;
scatter x=x2 y=y ;
proc sgplot data=house;
scatter x=x3 y=y ;
proc sgplot data=house;
scatter x=x4 y=y ;
proc sgplot data=house;
scatter x=x5 y=y ;
proc sgplot data=house;
scatter x=x6 y=y ;
proc sgplot data=house;
scatter x=x7 y=y ;
proc sgplot data=house;
scatter x=x8 y=y ;
proc sgplot data=house;
scatter x=x9 y=y ;
proc sgplot data=house;
scatter x=x10 y=y ;
proc sgplot data=house;
scatter x=x11 y=y ;
proc sgplot data=house;
scatter x=x12 y=y ;
run;
proc autoreg data=house;
model y=x3 x5 x6 x7 x9 x12/dwprob;
run;
quit;
